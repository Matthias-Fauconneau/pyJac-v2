from distutils.core import setup
from distutils.extension import Extension
from Cython.Build import cythonize
import numpy

sources = ['${wrapper}']
includes = ['$buildpath/', '$homepath/'] + [${extra_include_dirs}]
includes = [x for x in includes if x.strip()]

ext_modules = [Extension("pyjac_c",
                         sources=sources,
                         include_dirs=includes + [numpy.get_include()],
                         extra_compile_args=[
                             '-frounding-math', '-fsignaling-nans', '-fopenmp',
                             '-std=c99'],
                         language='c',
                         extra_objects=['$libname', '-fopenmp']
                         )]

setup(
    name='pyjac_c',
    ext_modules=cythonize(ext_modules, include_path=includes)
)

# A schema to validate test matrix specification for pyJac

# stub for chemical models
model-list:
    required: True
    type: list
    schema:
        # mechanism name
        name:
            type: string
            required: True
        # cantera format mechanism
        mech:
            type: string
            required: True
            regex: r'\.(cti|xml)$'
        # optional path to mechanism
        path:
            type: string
        # optional limits on number of initial conditions for various runtypes
        limits:
            type: dict
            schema:
                # limit on species rate evaluations
                species_rates:
                    type: integer
                    min: 0
                # limit on jacobian evaluations
                jacobian:
                    type: dict
                    schema:
                        # sparse jacobian
                        sparse:
                            type: integer
                            min: 0
                        # dense jacobian
                        full:
                            type: integer
                            min: 0

# allow for optional specification of memory limits
# memory_limits:
#     schema: memory_limits

# platform-list:
#     schema: platform-list

# test-list:
#     type: list
#     schema:
#         # test type specification
#         test-type:
#             type: string
#             required: True
#             allowed:
#                 - validation
#                 - performance
#         # evaluation type
#         eval-type:
#             type: string
#             default: both
#             allowed:
#                 - jacobian
#                 - species_rates
#                 - both

#         # allow overrides of platform defaults
#         species-rates:
#             type: map
#             dependencies:
#                 eval-type:
#                     - species_rates
#                     - both
#             is_override: True
#         finite-difference:
#             type: map
#             dependencies:
#                 eval-type:
#                     - jacobian
#                     - both
#             is_override: True
#         exact:
#             type: map
#             dependencies:
#                 eval-type:
#                     - jacobian
#                     - both
#             is_override: True
#         sparse:
#             type: map
#             dependencies:
#                 eval-type:
#                     - jacobian
#                     - both
#             is_override: True
#         full:
#             type: map
#             dependencies:
#                 eval-type:
#                     - jacobian
#                     - both
#             is_override: True

#         # specify which platforms to use, defaults to whole list
#         platforms:
#             type: list
#             schema:
#                 type: string
#                 is_platform: True
#             nullable: True

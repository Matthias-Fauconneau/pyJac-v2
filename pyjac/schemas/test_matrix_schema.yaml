# A schema to validate test matrix specification for pyJac

# stub for chemical models
model: include('mechanism', required=True)

# allow for specification of memory limits from platform schema
memory_limit: include('memory_limits', required=False)

# allow for specification of testing platforms from platform schema
platform: include('variable-platform', required=True)

---
mechanism:
    # the name of the mechanism, if not specified defaults to the provided file name
    # (minus the .cti suffix)
    name: str(required=False)
    # the Cantera format mechanism to test
    mech: str(required=True)
    # if not specified, the mechanism is assumed to be in either validation/name/
    # or performance/name/, depending on the run type
    path: str(required=False)
    # and stub for limits
    limits: any(include('source-ic-limit'), include('jacobian-limit'), required=False)
---
# limits on # of conditions evaluation of specific mechanism
source-ic-limit:
    source_rates: int(min=0, required=True)

jacobian-limit:
    jacobian: map(include('sparse-ic-limit'), include('dense-ic-limit'), required=True)

sparse-ic-limit:
    sparse: int(min=0, required=True)

dense-ic-limit:
    full: int(min=0, required=True)
---
# schema specifying test type
test:
    type: enum('validation', 'performance', required=True)
    overrides: map(include('override'), required=False)
